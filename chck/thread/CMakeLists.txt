set(CMAKE_THREAD_PREFER_PTHREADS 1)
find_package(Threads)
if (THREADS_FOUND)
   find_package(Valgrind)
   if (VALGRIND_FOUND)
      add_definitions(-DHAS_VALGRIND=1)
      include_directories(${VALGRIND_INCLUDE_DIRS})
   endif (VALGRIND_FOUND)

   add_subdirectory(queue)
endif (THREADS_FOUND)
